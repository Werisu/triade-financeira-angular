<div class="bg-white rounded-lg shadow-md p-6">
  <h3 class="text-xl font-semibold text-gray-800 mb-4">
    Gastos com Cartão de Crédito
    <span *ngIf="!creditCardId" class="text-sm text-gray-500 font-normal">
      - {{ currentMonth }}/{{ currentYear }}
    </span>
  </h3>

  <div *ngIf="loading" class="text-center py-8">
    <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"></div>
    <p class="text-gray-500 mt-2">Carregando gastos...</p>
  </div>

  <div *ngIf="!loading && expenses.length === 0" class="text-center py-8">
    <p class="text-gray-500">Nenhum gasto encontrado.</p>
  </div>

  <div *ngIf="!loading && expenses.length > 0" class="space-y-3">
    <div
      *ngFor="let expense of expenses"
      class="border-l-4 border-gray-200 pl-4 py-2 hover:bg-gray-50 transition-colors"
    >
      <div class="flex justify-between items-start">
        <div class="flex-1">
          <div class="flex items-center gap-2 mb-1">
            <span class="text-sm text-gray-500">
              {{ formatDate(expense.date) }}
            </span>
            <span class="text-xs text-gray-400">
              {{ getPaymentMethod(expense) }}
            </span>
            <span
              *ngIf="showCreditCardName && expense.credit_cards"
              class="text-xs px-2 py-1 rounded-full text-white"
              [style.background-color]="expense.credit_cards.color"
            >
              {{ expense.credit_cards.name }}
            </span>
          </div>

          <div class="font-medium text-gray-800">
            {{ expense.description }}{{ getInstallmentText(expense) }}
          </div>

          <div class="flex items-center gap-2 mt-1">
            <span class="text-sm text-gray-600">
              {{ expense.category }}
            </span>
            <span *ngIf="expense.tags && expense.tags.length > 0" class="text-xs text-gray-500">
              • {{ getTagsDisplay(expense.tags) }}
            </span>
          </div>
        </div>

        <div class="text-right">
          <div class="font-semibold text-gray-800">
            {{ formatAmount(expense.amount) }}
          </div>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="!loading && expenses.length > 0" class="mt-6 pt-4 border-t border-gray-200">
    <div class="flex justify-between items-center">
      <span class="text-sm text-gray-600">Total de gastos:</span>
      <span class="font-semibold text-lg text-gray-800">
        {{ formatAmount(getTotalExpenses()) }}
      </span>
    </div>
  </div>
</div>
